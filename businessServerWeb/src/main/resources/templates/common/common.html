<!DOCTYPE HTML>
```
<!-- suppress ThymeleafVariablesResolveInspection -->
```
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<title>Home</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="My Play Responsive web template, Bootstrap Web Templates, Flat Web Templates, Andriod Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design" />
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
	<!-- bootstrap -->
	<link th:href="@{css/bootstrap.min.css}" rel='stylesheet' type='text/css' media="all" />
	<!-- //bootstrap -->
	<link th:href="@{css/dashboard.css}" rel="stylesheet">
	<!-- Custom Theme files -->
	<link th:href="@{css/style.css}" rel='stylesheet' type='text/css' media="all" />
	<script th:src="@{js/jquery-1.11.1.min.js}"></script>
	<!-- 弹出框 -->
	<link href="/static/css/sweetalert-1.1.3.min.css" th:href="@{../../css/sweetalert-1.1.3.min.css}" rel="stylesheet">
	<script src="/static/js/sweetalert-1.1.3.min.js" th:src="@{../../js/sweetalert-1.1.3.min.js}"></script>

	<!--start-smoth-scrolling-->
<!-- fonts -->
<link href='#css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
<link href='#css?family=Poiret+One' rel='stylesheet' type='text/css'>
<!-- //fonts -->
</head>

<body>
<!--顶部菜单-->
<nav class="navbar navbar-inverse navbar-fixed-top" th:fragment="topbar">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
					aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" th:href="@{/}">
				<h1><img th:src="@{../../images/logo4.png}" width="130px" alt=""/></h1>
			</a>
		</div>
		<div id="navbar" class="navbar-collapse collapse">
			<div class="top-search">
				<form  action="/movie/search" class="navbar-form navbar-right">
					<input type="text" class="form-control" autocomplete="off" name="query" placeholder="Search...">
					<input type="submit" value=" ">
				</form>
			</div>
			<div class="header-top-right">
				<!--<div class="signin">-->
				<ul id="topMenu" class="list-inline pull-right">
					<li><span class="fa fa-user"></span><a style="color: #1a1d1d" id="loginStatus" th:href="@{/login}">登录</a></li>
				</ul>
				<div class="clearfix"></div>
			</div>
		</div>
	</div>
</nav>
<!--右侧导航-->
<div class="col-sm-3 col-md-2 sidebar" id="sidebar">
  <div class="top-navigation">
	  <div class="t-menu">菜单栏</div>
	  <div class="t-img">
		  <img th:src="@{../../images/lines.png}" alt=""/>
	  </div>
	  <div class="clearfix"></div>
  </div>
  <div class="drop-navigation drop-navigation">
	  <ul class="nav nav-sidebar">
		  <li class="nav-link active" th:class="${activeUri=='/'?'nav-link active':'nav-link'}"><a th:href="@{/}" class="home-icon"><span class="glyphicon glyphicon-home"
																		   aria-hidden="true"></span>首页</a></li>
		  <li class="nav-link" th:class="${activeUri=='/realTime'?'nav-link active':'nav-link'}"><a th:href="@{/realTime}" class="user-icon"><span class="glyphicon glyphicon-home glyphicon-blackboard"
															  aria-hidden="true"></span>实时推荐</a></li>
		  <li class="nav-link" th:class="${activeUri=='/morescoremovie'?'nav-link active':'nav-link'}"><a th:href="@{/morescoremovie}" class="sub-icon"><span class="glyphicon glyphicon-home glyphicon-hourglass"
															   aria-hidden="true"></span>评分最多</a></li>
		  <li th:class="${activeUri=='/genres'?'nav-link active':'nav-link'}">
			  <a href="#" class="menu1">
				  <span class="glyphicon glyphicon-film" aria-hidden="true"></span>电影分类
				  <span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>
			  </a>
			  <ul class="cl-effect-2" style="max-height: 150px; overflow-y: auto; overflow-x: hidden;">
				  <li class="nav-link" th:class="${activeUri=='/genres/Action/Action'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Action/Action}">动作片</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Adventure/Adventure'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Adventure/Adventure}">冒险片</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Animation/Animation'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Animation/Animation}">动画片</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Biography/Biography'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Biography/Biography}">传记</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Comedy/Comedy'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Comedy/Comedy}">喜剧片</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Costume/Costume'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Costume/Costume}">古装</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Crime/Crime'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Crime/Crime}">犯罪片</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Documentary/Documentary'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Documentary/Documentary}">纪录片</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Drama/Drama'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Drama/Drama}">喜剧文学</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Family/Family'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Family/Family}">家庭片</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Fantasy/Fantasy'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Fantasy/Fantasy}">奇幻片</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/History/History'?'nav-link active':'nav-link'}"><a th:href="@{/genres/History/History}">历史片</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Horror/Horror'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Horror/Horror}">恐怖片</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Music/Music'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Music/Music}">音乐片</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Mystery/Mystery'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Mystery/Mystery}">悬疑片</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Plot/Plot'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Plot/Plot}">剧情</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Romance/Romance'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Romance/Romance}">爱情片</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/ScienceFiction/ScienceFiction'?'nav-link active':'nav-link'}"><a th:href="@{/genres/ScienceFiction/ScienceFiction}">科幻片</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/SingingAndDancing/SingingAndDancing'?'nav-link active':'nav-link'}"><a th:href="@{/genres/SingingAndDancing/SingingAndDancing}">歌舞</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Sports/Sports'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Sports/Sports}">运动片</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Swordsmen/Swordsmen'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Swordsmen/Swordsmen}">武侠</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Thriller/Thriller'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Thriller/Thriller}">惊悚片</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/War/War'?'nav-link active':'nav-link'}"><a th:href="@{/genres/War/War}">战争片</a></li>
				  <li class="nav-link" th:class="${activeUri=='/genres/Western/Western'?'nav-link active':'nav-link'}"><a th:href="@{/genres/Western/Western}">西部片</a></li>

			  </ul>
		  </li>



			  <!-- script-for-menu -->
			  <script>
				  $("li a.menu1").click(function () {
					  $("ul.cl-effect-2").slideToggle(300, function () {
						  // Animation complete.
					  });
				  });
			  </script>
		  <li class="nav-link" th:class="${activeUri=='/newmovie'?'nav-link active':'nav-link'}"><a th:href="@{/newmovie}" class="menu"><span class="glyphicon glyphicon-film glyphicon-king"
											 aria-hidden="true"></span>最新发布<span></span></a></li>
		  <li class="nav-link" th:class="${activeUri=='/user/myrate'?'nav-link active':'nav-link'}"><a th:href="@{/user/myrate}" class="news-icon"><span class="glyphicon glyphicon-envelope"
															 aria-hidden="true"></span>我的评分电影</a></li>
	  </ul>
	  <!-- script-for-menu -->
	  <script>
		  $(".top-navigation").click(function () {
			  $(".drop-navigation").slideToggle(300, function () {
				  // Animation complete.
			  });
		  });
	  </script>
  </div>
</div>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script th:src="@{../../js/bootstrap.min.js}"></script>
<!-- Just to make our placeholder images work. Don't actually copy the next line! -->

<script>
	$(document).ready( function () {
		//必须随着页面加载先执行，不然有缓存界面会显示bug
		//未登录状态下改变最上面的管理行
		if (sessionStorage.getItem("user") == null){
			//设置显示登录
			$("#loginStatus").empty().html("&nbsp;&nbsp;" + "登录")
			// //移除管理模块的class样式并清空元素
			// $("#menuCaret").removeClass("caret")
			// $("#uiMenu").removeClass("dropdown-menu top-dropdown-ul").empty()
		}else{ //不为空则已经登录
			$.ajax({
				url : "/user/queryUser" ,
				type: "get",
				dataType: "json",
				success: function (res) {
					//用户登录了则改变最上面的导航条
					changeMenu(res)
				}
			});
		}
	});

	//登录状态下改变最上面的管理行
	function changeMenu(res) {
		let user = res.data;
		//不为空代表已经登录
		if (user.username != null){
			//修改为登录的用户名
			$("#loginStatus").html("&nbsp;" + user.username)
			//添加退出按钮
			let exitStr = "<li>"+ "<span class=\"fa fa-sign-out\"></span>"
					+ "<a style= \"color: #1a1d1d\" href=\"javascript:void(0);\" onclick=\"exitLogin()\">&nbsp;注销</a>"
					+ "</li>"
			$("#topMenu").append(exitStr)

			//移除跳转属性
			document.getElementById("loginStatus").removeAttribute("href")
		}
	}

	//退出功能
	function exitLogin(){
		if (sessionStorage.getItem("user") == null){
			alert("尚未登录，请先登录！")
		}else{
			$.ajax({
				url: "/user/exit",
				type: "get",
				dataType: "json",
				success:function (json) {
					if (json.state == 200){
						// alert("注销成功!")
						//弹出框提醒
						swal({
							title: "注销成功!",
							text: "即将为您自动跳转到首页...",
							type: "success",
							showConfirmButton:false,
							timer: 4000,
						});
						sessionStorage.removeItem("user")
						//动画过渡完跳转
						setTimeout(function(){
							location.href="/";
							return false;
						},1000);
					}
				},
				error:function () {
					swal({
						title: "注销失败",
						text: "服务器出现未知异常",
						type:'error',
						confirmButtonText:'确定',
						showConfirmButton:true
					});
				}
			})
		}
	}
</script>
</body>
</html>